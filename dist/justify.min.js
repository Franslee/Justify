/**
 * Justify 1.0 
 * Frans.Lee dmon@foxmail.com 
 * https://github.com/Franslee/Justify 
 * 2015-11-02 
 */
!function(a,b){"use strict";function c(a,b){this.ul=null,this.lis=[],this.extraLis=[],this.preItemTop=0,this.numPreLine=0,this.resetLiFontSize=!1,this.ulFontSize=0,this.numLastLine=0,this.opt={removeBtmGap:!1},this.init(a,b)}c.prototype.calcLastLineNum=function(){for(var a=0;a<this.lis.length;a++){if(0!==this.preItemTop&&this.preItemTop!==this.lis[a].offsetTop){this.numPreLine=a;break}this.preItemTop=this.lis[a].offsetTop,this.opt.removeBtmGap&&this.resetLiFontSize&&(this.lis[a].style.fontSize=this.ulFontSize)}this.numLastLine=this.lis.length%this.numPreLine},c.prototype.fillExtraNode=function(){if(this.numLastLine){var a=b.createElement("li");a.className="extra";for(var c=b.createTextNode(" \n"),d=b.createDocumentFragment(),e=0;e<this.numPreLine-this.numLastLine;e++)d.appendChild(a.cloneNode()),d.appendChild(c.cloneNode());this.ul.appendChild(d),this.extraLis=this.ul.querySelectorAll(".extra")}},c.prototype.removeExtraLis=function(){for(var a=!0,b=this.ul.childNodes.length-1;b>=0;b--)a&&1===this.ul.childNodes[b].nodeType&&"extra"!==this.ul.childNodes[b].className&&(a=!1),a&&this.ul.childNodes[b+1]&&this.ul.childNodes[b+1].parentNode.removeChild(this.ul.childNodes[b+1])},c.prototype.eventsRegister=function(b){var c=this;a.addEventListener("orientationchange",function(){c.init(b)},!1)},c.prototype.init=function(a,b){if("object"==typeof a){if(this.extraLis.length&&this.removeExtraLis(),b&&"object"==typeof b)for(var c in b)this.opt[c]=b[c];this.ul=a,this.lis=a.querySelectorAll("li"),0!==this.lis.length&&(this.opt.removeBtmGap&&(this.ulFontSize=getComputedStyle(this.ul).fontSize,this.ul.style.fontSize="0px",""===this.lis[0].style.fontSize&&(this.resetLiFontSize=getComputedStyle(this.lis[0]).fontSize==this.ulFontSize?!0:!1)),this.calcLastLineNum(),this.fillExtraNode(),this.eventsRegister(a))}},c.apply=function(a,b){return new c(a,b)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return c}):"undefined"!=typeof module&&module.exports?(module.exports=c.applay,module.exports.Justify=c):a.Justify=c}(window,document);